<!--index.wxml-->
<van-nav-bar
  title="2024年3月"
  right-text="预算设置"
  bind:click-right="onClickRight"
/>

<view class="container">
  <!-- 顶部栏 -->
  <view class="header">
    <view class="month-selector">
      <text>2024年3月</text>
      <image class="icon-arrow" src="/images/arrow-down.png" />
    </view>
    <view class="budget-progress">
      <view class="circle-progress">
        <text class="remaining">剩余30%</text>
      </view>
    </view>
  </view>

  <!-- 今日消费列表 -->
  <view class="bill-list">
    <van-swipe-cell right-width="{{ 65 }}" wx:for="{{ bills }}" wx:key="id">
      <van-cell-group>
        <van-cell
          title="{{ item.category }}"
          label="{{ item.note }}"
          value="{{ item.amount }}"
          value-class="{{ item.type === 'expense' ? 'expense' : 'income' }}"
          icon="{{ item.icon }}"
        />
      </van-cell-group>
      <view slot="right" class="delete-btn">删除</view>
    </van-swipe-cell>
  </view>

  <!-- 快速记账按钮 -->
  <van-button
    round
    type="primary"
    color="#FF6B6B"
    custom-class="add-bill-btn"
    icon="plus"
    bind:click="showBillPopup"
  />

  <bill-input 
    show="{{showBillInput}}" 
    bind:close="onBillInputClose"
    bind:save="onBillSave"
  />
</view>

<!-- 预算进度 -->
<view class="budget-circle">
  <van-circle
    value="{{ budgetPercentage }}"
    color="#4A90E2"
    text="剩余30%"
    size="120"
  />
</view>

<!-- 记账弹窗 -->
<van-popup
  show="{{ showBillPopup }}"
  position="bottom"
  custom-style="height: 50%"
  bind:close="onClose"
>
  <!-- 记账表单内容 -->
  <van-field
    model:value="{{ amount }}"
    type="digit"
    label="金额"
    placeholder="请输入金额"
  />
  <!-- 其他表单内容 -->
</van-popup>

<custom-tab-bar id="footer-nav-bar-id"
    navList="{{footerNavList}}"
    bind:onFooterNavChange="onFooterNavChange">
</custom-tab-bar>